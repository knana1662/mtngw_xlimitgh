<!DOCTYPE html>

<html lang="en">

  <head>
    {%load static%}
    {% load customtags %}
    {% load cache %}



    <meta name="description" content="chillZone Internet Services">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> 
    <meta name="MobileOptimized" content="width" />
    <meta name="keywords" content="ChillZone, Dynamic Data Solutions, ISP">        

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DDS-Kaneshi ChillZone</title>
    <link rel="icon" type="image/x-icon" href="{%static './images/ddsfavicon.ico'%}">


    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
      
      body#countdown {
          display: grid;
          height: 100vh;
          margin: 0;
          place-items: center;
      }

      #set_time{
          font-size: 100px;
      }
    </style>

  </head>

      <body id="countdown" id="set_server_updates_countdown" onload='countdown("{{set_server_updates_countdown}}")'>

        <div>
            <p>Kaneshi Chillzone is currently under maintaince</p>
            <p>Will be completed in:<p id="set_time">00:00:00</p></p>
        </div>

        <script>

            function countdown(get_id_and_deadline){

            var validJsonString = get_id_and_deadline.replace(/'/g, '"');
            // Parse the JSON string into a JavaScript array
            var dataArray = JSON.parse(validJsonString);

            for (let idx in dataArray ){
                
              // Update the count down every 1 second
              var x = setInterval(function() {

                // Get today's date and time
                var now = new Date().getTime();
                // Set the date we're counting down to
                var countDownDate = new Date(dataArray[idx]).getTime();

                // Find the distance between now and the count down date
                var distance = countDownDate - now;
                  
                // Time calculations for days, hours, minutes and seconds
                var days = Math.floor(distance / (1000 * 60 * 60 * 24));
                var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                var seconds = Math.floor((distance % (1000 * 60)) / 1000);
                  
                // Output the result in an element with id="demo"
                document.getElementById("set_time").innerHTML = days + "d " + hours + "h "
                + minutes + "m " + seconds + "s ";
                  
                if (distance < 0) {
                  clearInterval(x);
                  document.getElementById("set_time").innerHTML = "00:00:00";

                  // if (document.getElementById("set_time").innerHTML=="00:00:00" && window.location.pathname == "/" || window.location.pathname.startsWith("/otp") || window.location.pathname.endsWith("otp/") || window.location.pathname.startsWith("/balance")  || window.location.pathname.endsWith("balance/")  ){
                    if (document.getElementById("set_time").innerHTML=="00:00:00" ){
                    window.location.href = "https://google.com";
                  }
                }
              }, 1000);

            }


            };

            // countdown(onload="countdown(&quot;['2024-09-12 22:26:29']&quot;)")
            countdown(onload="['2025-06-14 18:40:29']")

            // function countdown(get_id_and_deadline){

            //   var validJsonString = get_id_and_deadline.replace(/'/g, '"');
            //   // Parse the JSON string into a JavaScript array
            //   var dataArray = JSON.parse(validJsonString);

            //   for (let idx in dataArray ){
                  

            //     // Update the count down every 1 second
            //     var x = setInterval(function() {

            //       // Get today's date and time
            //       var now = new Date().getTime();
            //       // Set the date we're counting down to
            //       var countDownDate = new Date(dataArray[idx]).getTime();

            //       // Find the distance between now and the count down date
            //       var distance = countDownDate - now;
                    
            //       // Time calculations for days, hours, minutes and seconds
            //       var days = Math.floor(distance / (1000 * 60 * 60 * 24));
            //       var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            //       var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            //       var seconds = Math.floor((distance % (1000 * 60)) / 1000);
                    
            //       // Output the result in an element with id="demo"
            //       document.getElementById(dataArray[idx]).innerHTML = days + "d " + hours + "h "
            //       + minutes + "m " + seconds + "s ";
                    
            //       // If the count down is over, write some text 
            //       if (distance < 0) {
            //         clearInterval(x);
            //         document.getElementById(dataArray[idx]).innerHTML = "EXPIRED";

            //         if (document.getElementById(dataArray[idx]).innerHTML=="EXPIRED" && window.location.pathname == "/" || window.location.pathname.startsWith("/otp") || window.location.pathname.endsWith("otp/") || window.location.pathname.startsWith("/balance")  || window.location.pathname.endsWith("balance/")  ){
            //           let url = document.getElementById(dataArray[idx]).parentElement.children[2].querySelector("a").href
            //           console.log(url);
            //           window.location.href = url;
            //         }
            //       }
            //     }, 1000);

            // }


            // };
    
        </script>
    </body>
 
</html>
